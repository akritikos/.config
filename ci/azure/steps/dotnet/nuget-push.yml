parameters:
- name: nugetDirectory
  type: string
- name: feedCredentials
  type: string
  default: Kritikos
- name: configuration
  type: string
  default: $(BuildConfiguration)


steps:
  - ${{ if eq(lower(parameters.configuration), 'release') }}:
    - task: NuGetCommand@2
      displayName: 'Push NuGet Package'
      inputs:
        command: 'push'
        packagesToPush: '{{ parameters.nugetDirectory }}/*.nupkg'
        nuGetFeedType: 'external'
        publishFeedCredentials: '{{ parameters.feedCredentials }}'
  - ${{ if ne(lower(parameters.configuration), 'release') }}:
    - task:
      displayName: Unsupported nuget
      - pwsh: |
        Write-Host 'Only nugets build in Release configuration will be pushed!' -ForegroundColor red
